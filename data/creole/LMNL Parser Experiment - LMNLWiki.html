<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0102)http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php/LMNL_Parser_Experiment -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script type="text/javascript" src="./LMNL Parser Experiment - LMNLWiki_files/analytics.js.download" charset="utf-8"></script>

<script type="text/javascript">archive_analytics.values.service='wb';archive_analytics.values.server_name='wwwb-app18.us.archive.org';archive_analytics.values.server_ms=269;</script><script type="text/javascript" src="./LMNL Parser Experiment - LMNLWiki_files/wbhack.js.download" charset="utf-8"></script>

<script type="text/javascript">
__wbhack.init('http://web.archive.org/web');
</script>
<link rel="stylesheet" type="text/css" href="./LMNL Parser Experiment - LMNLWiki_files/banner-styles.css">
<link rel="stylesheet" type="text/css" href="./LMNL Parser Experiment - LMNLWiki_files/iconochive.css">

<!-- End Wayback Rewrite JS Include -->
    
    <meta name="KEYWORDS" content="LMNL Parser Experiment,Example-lmnl-text.txt,LMNL.g,Lmnl-ANTLR.py,Lmnl.SimpleParse.py,Lmnl.def">
<meta name="robots" content="index,follow">
<link rel="shortcut icon" href="http://web.archive.org/web/20081205022219im_/http://www.lmnl.org:80/favicon.ico">
    <title>LMNL Parser Experiment - LMNLWiki</title>
    <style type="text/css" media="screen,projection">/*<![CDATA[*/ @import "/web/20081205022219cs_/http://www.lmnl.org:80/wiki/skins/monobook/main.css"; /*]]>*/</style>
    <link rel="stylesheet" type="text/css" media="print" href="./LMNL Parser Experiment - LMNLWiki_files/commonPrint.css">
    <!--[if lt IE 5.5000]><style type="text/css">@import "/wiki/skins/monobook/IE50Fixes.css";</style><![endif]-->
    <!--[if IE 5.5000]><style type="text/css">@import "/wiki/skins/monobook/IE55Fixes.css";</style><![endif]-->
    <!--[if gte IE 6]><style type="text/css">@import "/wiki/skins/monobook/IE60Fixes.css";</style><![endif]-->
    <!--[if lt IE 7]><script type="text/javascript" src="/wiki/skins/common/IEFixes.js"></script>
    <meta http-equiv="imagetoolbar" content="no" /><![endif]-->
    <script type="text/javascript" src="./LMNL Parser Experiment - LMNLWiki_files/index.php"></script><style type="text/css">:root #content > #right > .dose > .dosesingle,
:root #content > #center > .dose > .dosesingle,
:root #header + #content > #left > #rlblock_left
{display:none !important;}</style>    <script type="text/javascript" src="./LMNL Parser Experiment - LMNLWiki_files/wikibits.js.download"></script>
    <style type="text/css">/*<![CDATA[*/
@import "/web/20081205022219cs_/http://www.lmnl.org:80/wiki/index.php?title=MediaWiki:Monobook.css&action=raw&ctype=text/css&smaxage=18000";
@import "/web/20081205022219cs_/http://www.lmnl.org:80/wiki/index.php?title=-&action=raw&gen=css&maxage=18000";
/*]]>*/</style>              <style id="holderjs-style" type="text/css"></style></head>
  <body class="ns-0 __plain_text_READY__"><div id="wm-ipp" lang="en" style="display: block; direction: ltr;">
<div style="position:fixed;left:0;top:0;right:0;">
<div id="wm-ipp-inside">
  <div style="position:relative;">
    <div id="wm-logo" style="float:left;width:130px;padding-top:10px;">
      <a href="http://web.archive.org/web/" title="Wayback Machine home page"><img src="./LMNL Parser Experiment - LMNLWiki_files/wayback-toolbar-logo.png" alt="Wayback Machine" width="110" height="39" border="0"></a>
    </div>
    <div class="r" style="float:right;">
      <div id="wm-btns" style="text-align:right;height:25px;">
                  <div id="wm-save-snapshot-success">success</div>
          <div id="wm-save-snapshot-fail">fail</div>
          <a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php/LMNL_Parser_Experiment#" onclick="__wm.saveSnapshot(&#39;http://www.lmnl.org:80/wiki/index.php/LMNL_Parser_Experiment&#39;, &#39;20081205022219&#39;)" title="Save to My Web Archive" id="wm-save-snapshot-open">
            <span class="iconochive-web"></span>
          </a>
          <span id="wm-save-snapshot-in-progress" class="iconochive-web"></span>
        	<a href="http://faq.web.archive.org/" title="Get some help using the Wayback Machine" style="top:-6px;"><span class="iconochive-question" style="color:rgb(87,186,244);font-size:160%;"></span></a>
	<a id="wm-tb-close" href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php/LMNL_Parser_Experiment#close" onclick="__wm.h(event);return false;" style="top:-2px;" title="Close the toolbar"><span class="iconochive-remove-circle" style="color:#888888;font-size:240%;"></span></a>
      </div>
      <div id="wm-share" style="text-align:right;">
	<a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php/LMNL_Parser_Experiment#" onclick="window.open(&#39;https://www.facebook.com/sharer/sharer.php?u=http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php/LMNL_Parser_Experiment&#39;, &#39;&#39;, &#39;height=400,width=600&#39;); return false;" title="Share on Facebook" style="margin-right:5px;" target="_blank"><span class="iconochive-facebook" style="color:#3b5998;font-size:160%;"></span></a>
	<a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php/LMNL_Parser_Experiment#" onclick="window.open(&#39;https://twitter.com/intent/tweet?text=http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php/LMNL_Parser_Experiment&amp;via=internetarchive&#39;, &#39;&#39;, &#39;height=400,width=600&#39;); return false;" title="Share on Twitter" style="margin-right:5px;" target="_blank"><span class="iconochive-twitter" style="color:#1dcaff;font-size:160%;"></span></a>
      </div>
    </div>
    <table class="c" style="">
      <tbody>
	<tr>
	  <td class="u" colspan="2">
	    <form target="_top" method="get" action="http://web.archive.org/web/submit" name="wmtb" id="wmtb"><input type="text" name="url" id="wmtbURL" value="http://www.lmnl.org:80/wiki/index.php/LMNL_Parser_Experiment" onfocus="this.focus();this.select();" autocomplete="off"><input type="hidden" name="type" value="replay"><input type="hidden" name="date" value="20081205022219"><input type="submit" value="Go"></form>
	  </td>
	  <td class="n" rowspan="2" style="width:110px;">
	    <table>
	      <tbody>
		<!-- NEXT/PREV MONTH NAV AND MONTH INDICATOR -->
		<tr class="m">
		  <td class="b" nowrap="nowrap">Nov</td>
		  <td class="c" id="displayMonthEl" title="You are here: 02:22:19 Dec 05, 2008">DEC</td>
		  <td class="f" nowrap="nowrap">Jan</td>
		</tr>
		<!-- NEXT/PREV CAPTURE NAV AND DAY OF MONTH INDICATOR -->
		<tr class="d">
		  <td class="b" nowrap="nowrap"><a href="http://web.archive.org/web/20081119235744/http://www.lmnl.org/wiki/index.php/LMNL_Parser_Experiment" title="23:57:44 Nov 19, 2008"><img src="./LMNL Parser Experiment - LMNLWiki_files/wm_tb_prv_on.png" alt="Previous capture" width="14" height="16" border="0"></a></td>
		  <td class="c" id="displayDayEl" style="width:34px;font-size:24px;white-space:nowrap;" title="You are here: 02:22:19 Dec 05, 2008">05</td>
		  <td class="f" nowrap="nowrap"><img src="./LMNL Parser Experiment - LMNLWiki_files/wm_tb_nxt_off.png" alt="Next capture" width="14" height="16" border="0"></td>
		</tr>
		<!-- NEXT/PREV YEAR NAV AND YEAR INDICATOR -->
		<tr class="y">
		  <td class="b" nowrap="nowrap">2007</td>
		  <td class="c" id="displayYearEl" title="You are here: 02:22:19 Dec 05, 2008">2008</td>
		  <td class="f" nowrap="nowrap">2009</td>
		</tr>
	      </tbody>
	    </table>
	  </td>
	</tr>
	<tr>
	  <td class="s">
	    	    <div id="wm-nav-captures"><a class="t" href="http://web.archive.org/web/*/http://www.lmnl.org:80/wiki/index.php/LMNL_Parser_Experiment" title="See a list of every capture for this URL">2 captures</a><div class="r" title="Timespan for captures of this URL">19 Nov 2008 - 5 Dec 2008</div></div>
	  </td>
	  <td class="k">
	    <a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php/LMNL_Parser_Experiment" id="wm-graph-anchor">
	      <div id="wm-ipp-sparkline" title="Explore captures for this URL" style="position: relative">
		<canvas id="wm-sparkline-canvas" width="550" height="27" border="0"></canvas>
	      <div class="yt" style="display: none; width: 25px; height: 27px;"></div><div class="mt" style="display: none; width: 2px; height: 27px;"></div></div>
	    </a>
	  </td>
	</tr>
      </tbody>
    </table>
    <div style="position:absolute;bottom:0;right:2px;text-align:right;">
      <a id="wm-expand" class="wm-btn wm-closed" href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php/LMNL_Parser_Experiment#expand" onclick="__wm.ex(event);return false;"><span id="wm-expand-icon" class="iconochive-down-solid"></span> <span style="font-size:80%">About this capture</span></a>
    </div>
  </div>
    <div id="wm-capinfo" style="border-top:1px solid #777;display:none; overflow: hidden">
            <div style="background-color:#666;color:#fff;font-weight:bold;text-align:center">COLLECTED BY</div>
    <div style="padding:3px;position:relative" id="wm-collected-by-content">
            <div style="display:inline-block;vertical-align:top;width:50%;">
			<span class="c-logo" style="background-image:url(https://archive.org/services/img/alexacrawls);"></span>
		Organization: <a style="color:#33f;" href="https://archive.org/details/alexacrawls" target="_new"><span class="wm-title">Alexa Crawls</span></a>
		<div style="max-height:75px;overflow:hidden;position:relative;">
	  <div style="position:absolute;top:0;left:0;width:100%;height:75px;background:linear-gradient(to bottom,rgba(255,255,255,0) 0%,rgba(255,255,255,0) 90%,rgba(255,255,255,255) 100%);"></div>
	  Starting in 1996, <a href="http://www.alexa.com/">Alexa Internet</a> has been donating their crawl data to the Internet Archive.  Flowing in every day, these data are added to the <a href="http://web.archive.org/">Wayback Machine</a> after an embargo period.
	</div>
	      </div>
      <div style="display:inline-block;vertical-align:top;width:49%;">
			<span class="c-logo" style="background-image:url(https://archive.org/services/img/alexa_web_2008)"></span>
		<div>Collection: <a style="color:#33f;" href="https://archive.org/details/alexa_web_2008" target="_new"><span class="wm-title">Alexa Web 2008</span></a></div>
		<div style="max-height:75px;overflow:hidden;position:relative;">
	  <div style="position:absolute;top:0;left:0;width:100%;height:75px;background:linear-gradient(to bottom,rgba(255,255,255,0) 0%,rgba(255,255,255,0) 90%,rgba(255,255,255,255) 100%);"></div>
	  Crawl data donated by Alexa Internet. This data is currently not publicly accessible
	</div>
	      </div>
    </div>
    <div style="background-color:#666;color:#fff;font-weight:bold;text-align:center" title="Timestamps for the elements of this page">TIMESTAMPS</div>
    <div>
      <div id="wm-capresources" style="margin:0 5px 5px 5px;max-height:250px;overflow-y:scroll !important"></div>
      <div id="wm-capresources-loading" style="text-align:left;margin:0 20px 5px 5px;display:none"><img src="./LMNL Parser Experiment - LMNLWiki_files/loading.gif" alt="loading"></div>
    </div>
  </div></div></div></div><!-- BEGIN WAYBACK TOOLBAR INSERT -->
<script type="text/javascript" src="./LMNL Parser Experiment - LMNLWiki_files/timestamp.js.download" charset="utf-8"></script>
<script type="text/javascript" src="./LMNL Parser Experiment - LMNLWiki_files/graph-calc.js.download" charset="utf-8"></script>
<script type="text/javascript" src="./LMNL Parser Experiment - LMNLWiki_files/auto-complete.js.download" charset="utf-8"></script>
<script type="text/javascript" src="./LMNL Parser Experiment - LMNLWiki_files/toolbar.js.download" charset="utf-8"></script>

<style type="text/css">
body {
  margin-top:0 !important;
  padding-top:0 !important;
  /*min-width:800px !important;*/
}
.wb-autocomplete-suggestions {
    text-align: left; cursor: default; border: 1px solid #ccc; border-top: 0; background: #fff; box-shadow: -1px 1px 3px rgba(0,0,0,.1);
    position: absolute; display: none; z-index: 2147483647; max-height: 254px; overflow: hidden; overflow-y: auto; box-sizing: border-box;
}
.wb-autocomplete-suggestion { position: relative; padding: 0 .6em; line-height: 23px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; font-size: 1.02em; color: #333; }
.wb-autocomplete-suggestion b { font-weight: bold; }
.wb-autocomplete-suggestion.selected { background: #f0f0f0; }
</style>
<script type="text/javascript">
__wm.bt(550,27,25,2,"web","http://www.lmnl.org:80/wiki/index.php/LMNL_Parser_Experiment","2008-12-05",1996);
</script><div class="wb-autocomplete-suggestions "></div>
<!-- END WAYBACK TOOLBAR INSERT -->
    <div id="globalWrapper">
      <div id="column-content">
	<div id="content">
	  <a name="top" id="top"></a>
	  	  <h1 class="firstHeading">LMNL Parser Experiment</h1>
	  <div id="bodyContent">
	    <h3 id="siteSub">From LMNLWiki</h3>
	    <div id="contentSub"></div>
	    	    	    <!-- start content -->
	    <p>I have been experimenting with creating an LMNL Parser.  These pages describe the experiments and their status.  All feedback or help is welcome.
</p>
<table id="toc" class="toc"><tbody><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1"><a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php/LMNL_Parser_Experiment#Goals"><span class="tocnumber">1</span> <span class="toctext">Goals</span></a></li>
<li class="toclevel-1"><a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php/LMNL_Parser_Experiment#Current_Status"><span class="tocnumber">2</span> <span class="toctext">Current Status</span></a></li>
<li class="toclevel-1"><a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php/LMNL_Parser_Experiment#Lessons_Learned"><span class="tocnumber">3</span> <span class="toctext">Lessons Learned</span></a></li>
<li class="toclevel-1"><a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php/LMNL_Parser_Experiment#Experiments"><span class="tocnumber">4</span> <span class="toctext">Experiments</span></a>
<ul>
<li class="toclevel-2"><a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php/LMNL_Parser_Experiment#Experiment_1:_SimpleParse"><span class="tocnumber">4.1</span> <span class="toctext">Experiment 1: SimpleParse</span></a>
<ul>
<li class="toclevel-3"><a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php/LMNL_Parser_Experiment#Requirements"><span class="tocnumber">4.1.1</span> <span class="toctext">Requirements</span></a></li>
<li class="toclevel-3"><a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php/LMNL_Parser_Experiment#Building_the_grammar"><span class="tocnumber">4.1.2</span> <span class="toctext">Building the grammar</span></a></li>
<li class="toclevel-3"><a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php/LMNL_Parser_Experiment#Running_the_Parser"><span class="tocnumber">4.1.3</span> <span class="toctext">Running the Parser</span></a></li>
<li class="toclevel-3"><a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php/LMNL_Parser_Experiment#Results"><span class="tocnumber">4.1.4</span> <span class="toctext">Results</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php/LMNL_Parser_Experiment#Experiment_2:_ANTLR_.26_ANTLRWorks"><span class="tocnumber">4.2</span> <span class="toctext">Experiment 2: ANTLR &amp; ANTLRWorks</span></a>
<ul>
<li class="toclevel-3"><a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php/LMNL_Parser_Experiment#Requirements_2"><span class="tocnumber">4.2.1</span> <span class="toctext">Requirements</span></a></li>
<li class="toclevel-3"><a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php/LMNL_Parser_Experiment#Building_the_grammar_2"><span class="tocnumber">4.2.2</span> <span class="toctext">Building the grammar</span></a></li>
<li class="toclevel-3"><a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php/LMNL_Parser_Experiment#Running_the_Parser_2"><span class="tocnumber">4.2.3</span> <span class="toctext">Running the Parser</span></a></li>
<li class="toclevel-3"><a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php/LMNL_Parser_Experiment#Results_2"><span class="tocnumber">4.2.4</span> <span class="toctext">Results</span></a>
<ul>
<li class="toclevel-4"><a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php/LMNL_Parser_Experiment#Update"><span class="tocnumber">4.2.4.1</span> <span class="toctext">Update</span></a></li>
<li class="toclevel-4"><a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php/LMNL_Parser_Experiment#Update_2"><span class="tocnumber">4.2.4.2</span> <span class="toctext">Update 2</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-2"><a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php/LMNL_Parser_Experiment#Experiment_3:_ANTLR_with_a_dumb_lexer"><span class="tocnumber">4.3</span> <span class="toctext">Experiment 3: ANTLR with a dumb lexer</span></a>
<ul>
<li class="toclevel-3"><a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php/LMNL_Parser_Experiment#Requirements_3"><span class="tocnumber">4.3.1</span> <span class="toctext">Requirements</span></a></li>
<li class="toclevel-3"><a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php/LMNL_Parser_Experiment#Building_the_grammar_3"><span class="tocnumber">4.3.2</span> <span class="toctext">Building the grammar</span></a></li>
<li class="toclevel-3"><a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php/LMNL_Parser_Experiment#Running_the_Parser_3"><span class="tocnumber">4.3.3</span> <span class="toctext">Running the Parser</span></a></li>
<li class="toclevel-3"><a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php/LMNL_Parser_Experiment#Results_3"><span class="tocnumber">4.3.4</span> <span class="toctext">Results</span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</td></tr></tbody></table>
<p><script type="text/javascript"> if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } </script>
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php?title=LMNL_Parser_Experiment&amp;action=edit&amp;section=1" title="LMNL Parser Experiment">edit</a>]</div><a name="Goals"></a><h1>Goals</h1>
<ul><li> to define the LMNL grammar at a high level using something like EBNF
</li><li> to auto generate (most of) the software using a standard tool
</li><li> to work with the parser in Python (nice if other languages are also supported)
</li></ul>
<p>Longer term goals are:
</p>
<ul><li> to define a set of LMNL objects/functions with a standard API
</li><li> to construct those objects using the abstract syntax tree of the parser
</li><li> to begin to do useful work parsing lmnl documents 
</li></ul>
<p>Parsing speed &amp; memory utilisation will be ignored unless performance is prohibitively poor.  
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php?title=LMNL_Parser_Experiment&amp;action=edit&amp;section=2" title="LMNL Parser Experiment">edit</a>]</div><a name="Current_Status"></a><h1>Current Status</h1>
<ul><li> Fully working grammar and java parser using ANTLR
</li><li> Mostly working grammar and python parser using SimpleParse 
<ul><li> some limitations (no Content in Annotations)
</li></ul>
</li></ul>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php?title=LMNL_Parser_Experiment&amp;action=edit&amp;section=3" title="LMNL Parser Experiment">edit</a>]</div><a name="Lessons_Learned"></a><h1>Lessons Learned</h1>
<ul><li> Separate lexers and parsers make parsing tag languages difficult.
<ul><li> Lexers are not intelligent, so any context sensitive processing becomes very hard at the lexer level.
<ul><li> One common solution is to use syntactic predicates (a boolean flag that turns on and off depending on the context - e.g. inside the versionInfo or tagContent.)
</li><li> A limitation of this technique is that context must be determined entirely at the lexer stage (you can't supply context from the higher level rules).  Unfortunately, this means it becomes very difficult to parse LMNL like this.
</li><li> Nested tags (annotations, and content inside annotations) would all have to be represented by the lexer, in order to determine the proper scope - i.e. if you were still inside a tag.  Otherwise, the first close of an annotation inside its tag will reset the syntactic predicate back to being outside a tag.
</li></ul>
</li><li> The easiest solution is to accept a very broad range of characters at the lexer level, but supply syntactic validating predicates attached to the higher level rules that raise an error if the contents of the token aren't right in that context (supplied as code in the target language)
</li></ul>
</li></ul>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php?title=LMNL_Parser_Experiment&amp;action=edit&amp;section=4" title="LMNL Parser Experiment">edit</a>]</div><a name="Experiments"></a><h1>Experiments</h1>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php?title=LMNL_Parser_Experiment&amp;action=edit&amp;section=5" title="LMNL Parser Experiment">edit</a>]</div><a name="Experiment_1:_SimpleParse"></a><h2>Experiment 1: SimpleParse</h2>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php?title=LMNL_Parser_Experiment&amp;action=edit&amp;section=6" title="LMNL Parser Experiment">edit</a>]</div><a name="Requirements"></a><h3>Requirements</h3>
<ul><li> Python 2.4+
</li><li> SimpleParse 2.1+
</li></ul>
<p><a href="http://web.archive.org/web/20081205022219/http://simpleparse.sourceforge.net/" class="external free" title="http://simpleparse.sourceforge.net/" rel="nofollow">http://simpleparse.sourceforge.net/</a>
</p><p>SimpleParse is a parser generator for Python.  It accepts grammars in a slightly verbose EBNF style, and operates as a front end to another text processing engine for Python called mxTextTools.  mxTextTools is very fast, but has a very idiosyncratic way of specifying matches at a fairly low level.
</p><p>Although originally built to make mxTextTools usable, some underlying limitations of the mxTextTools engine (stack limits due to recursion and infinite loops due to matching * zero width productions) have led the SimpleParse author to debate whether or not to move to another text processing back end.  The latest version of SimpleParse has a significant rebuild of the mxTextTools engine included in it, as the author of mxTextTools isn't interested in going where SimpleParse wants to go.   
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php?title=LMNL_Parser_Experiment&amp;action=edit&amp;section=7" title="LMNL Parser Experiment">edit</a>]</div><a name="Building_the_grammar"></a><h3>Building the grammar</h3>
<p>The style of SimpleParse grammars is very close to EBNF, but adds a bit more punctuation.  Error reporting isn't particularly good.  The resulting LMNL grammar is very close to the EBNF on the wiki, although I have expanded some productions a bit - partly to learn and partly to make parsing easier.  
</p><p>One issue I encountered is that the lmnl grammar specifies a lot of productions that can match zero to many times (*).  Combining this with optional matches in higher level productions led to problems matching, and always with the suspicion that one of these might be triggering the "infinite loop" issue.  With this in mind, I refactored most of the productions to match something one to many times (+), with the higher level productions specifying optionality (?).  This seemed to help to figure out what was matching and what wasn't.
</p><p>Some constructions particularly caused problems.  SimpleParse does not do backtracking, so some of the productions could not match - in particular the grouping of spaces inside TagContent would not match.  Grouping these another way allowed the productions to match (I think I got it to mean the same).
</p><p>Having MetaData inside AnnotationTags caused me some recursion problems, although I could sometimes make this work if I disabled other productions. EmptyTags seem to cause matching problems, as the first two tokens of StartTag and EmptyTag are the same; there may be some grammar tricks to get around that (creating another intermediate token).
</p><p>I could not resolve the recursion due to Content inside Annotations - it causes SimpleParse to go into an infinite loop.  This sounds like one of the limitations of the mxTextTools engine - but it can be a subtle effect, occurring inside child productions of child productions etc.  It is also possible that it is a left-recursion problem (but SimpleParse grammars aren't quite LL, LR, LALR or anything else, so it's hard to be entirely sure).  Replacing Content with CharData allowed the grammar to build and parse, but is not ideal.  
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php?title=LMNL_Parser_Experiment&amp;action=edit&amp;section=8" title="LMNL Parser Experiment">edit</a>]</div><a name="Running_the_Parser"></a><h3>Running the Parser</h3>
<p>I couldn't upload a non-image file to this wiki, so a link to a page containing the lmnl grammar is here <a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php/Lmnl.def" title="Lmnl.def">Lmnl.def</a>.  A small python script to read a sample file (called 'example-lmnl-text.txt') and parse it is here <a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php/Lmnl.SimpleParse.py" title="Lmnl.SimpleParse.py">Lmnl.SimpleParse.py</a>.  The example lmnl file is here <a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php/Example-lmnl-text.txt" title="Example-lmnl-text.txt">example-lmnl-text.txt</a>.
</p><p>Place all of these files into the same directory, and (assuming you have SimpleParse &amp; python installed and available on your path), type:
</p>
<pre>python Lmnl.SimpleParse.py
</pre>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php?title=LMNL_Parser_Experiment&amp;action=edit&amp;section=9" title="LMNL Parser Experiment">edit</a>]</div><a name="Results"></a><h3>Results</h3>
<p>Within the limitations noted above, I could successfully parse an example lmnl text (taken from the wiki).  Parsing is fast and seems to be accurate.  It is quite possible that all of these limitations can be worked around, but since they are a non-standard limitation, for a language novice like myself, it's one too many things to worry about.  For those reasons, I decided to explore using more standard parser generators.
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php?title=LMNL_Parser_Experiment&amp;action=edit&amp;section=10" title="LMNL Parser Experiment">edit</a>]</div><a name="Experiment_2:_ANTLR_.26_ANTLRWorks"></a><h2>Experiment 2: ANTLR &amp; ANTLRWorks</h2>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php?title=LMNL_Parser_Experiment&amp;action=edit&amp;section=11" title="LMNL Parser Experiment">edit</a>]</div><a name="Requirements_2"></a><h3>Requirements</h3>
<ul><li> AntlrWorks (from the antlr web site - includes a working antlr3 tool inside it)
</li><li> The antlr python runtime (from <a href="http://web.archive.org/web/20081205022219/http://www.antlr.org/download/Python/" class="external free" title="http://www.antlr.org/download/Python/" rel="nofollow">http://www.antlr.org/download/Python/</a> - must run "python setup.py install" to install into your python environment.
</li><li> Python 2.4+ (I am using 2.5)
</li><li> Java 1.5+ (I am using 1.6)
</li></ul>
<p><a href="http://web.archive.org/web/20081205022219/http://www.antlr.org/" class="external free" title="http://www.antlr.org/" rel="nofollow">http://www.antlr.org/</a>
</p><p>ANTLR (Another Tool for Language Recognition) is written in Java by Terence Par and accepts EBNF style grammars.  It is a bit closer in spirit to lex/yacc than SimpleParse, involving producing lexer tokens, then and higher level productions built on top of those.  It can generate parsers in a variety of languages (C, Java, Python, Ruby, C#, Perl, and many others), although Java is best supported as the native language.  It is an LL(*) parser (apparently a refinement of LL(k)), so left recursion is still something to watch for, although ANLTR3 does support backtracking.
</p><p>ANLTRWorks is a Java IDE for building and debugging ANTLR grammars.  It provides sophisticated features to help build, visualise, navigate and debug grammars.  It will check grammars, draw syntax diagrams in real time of the productions, visually indicate alternative problems, syntax highlights the grammars, and lots more.  Like most Java programs, it doesn't quite integrate perfectly into the desktop environment, but it is still very usable.
</p><p>If nothing else, it is worth downloading ANTLRWorks (it's free), and loading up the LMNL.g file inside it, just to explore the lmnl language.  The visualisations are useful, and better than anything else I've seen.
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php?title=LMNL_Parser_Experiment&amp;action=edit&amp;section=12" title="LMNL Parser Experiment">edit</a>]</div><a name="Building_the_grammar_2"></a><h3>Building the grammar</h3>
<p>My first attempt at building an ANTLR grammar for lmnl, by directly translating the lmnl grammar into lexer tokens didn't work at all - so I went back and built it up from the bottom.  A convention I had not appreciated is that a rule starting with an uppercase letter is a lexer token, and one with a lower case letter is a production. 
</p><p>Aside from those issues, I followed a similar style to the SimpleParse grammar - expanding some productions and defining most of the literals by name.  I also encountered similar issues to SimpleParse, leading me to believe that these may be generic LL grammar issues.  
</p><p>I stayed with the idea of making productions specify what they match (one, or one-to-many times), and leaving optionality up to higher level productions, rather than having a lot of zero-to-many matches scattered about.
</p><p>Like SimpleParse, EmptyTags could cause matching problems (which I could resolve using an intermediate token in StartTag and EmptyTag for "OpenStartTag TagContent").  Likewise, MetaData in AnnotationTags, and Content in Annotations caused fatal LL recursion errors, which apparently can be resolved by left factoring (something I have yet to fully explore). 
</p><p>I had some problems with the definitions of MetaData and whitespace in various productions.  To resolve these, I simplified the statement to just MetaData* (with whitespace included in MetaData).  This isn't exactly the same as the lmnl grammar on the wiki, but it does work.  I will try to figure out those remaining issues at a later date, as they are not large.
</p><p>I finally came up with a grammar that antlr will accept by specifying the "backtrack=true" option.  This automatically backtracks if a match can't be made and tries other alternatives.  The resulting gramar is almost exactly like the lmnl grammar (including recursive MetaData and Content in Annotations).  ANTLR says the grammar checks out OK, and happily builds parser code.
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php?title=LMNL_Parser_Experiment&amp;action=edit&amp;section=13" title="LMNL Parser Experiment">edit</a>]</div><a name="Running_the_Parser_2"></a><h3>Running the Parser</h3>
<p>The LMNL grammar can be found at this page <a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php/LMNL.g" title="LMNL.g">LMNL.g</a>.  A simple python test harness script, to load an example lmnl text file <a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php/Example-lmnl-text.txt" title="Example-lmnl-text.txt">example-lmnl-text.txt</a> and parse it can be found here <a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php/Lmnl-ANTLR.py" title="Lmnl-ANTLR.py">lmnl-ANTLR.py</a>.  To use these files, load LMNL.g into AntlrWorks, and select Generate/Generate Code.  This will place the generated python files wherever AntlrWorks is configured to put them (File/Preferences).  Put these files into the same directory as all the others, and run the test harness script:
</p>
<pre>python lmnl-ANTLR.py
</pre>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php?title=LMNL_Parser_Experiment&amp;action=edit&amp;section=14" title="LMNL Parser Experiment">edit</a>]</div><a name="Results_2"></a><h3>Results</h3>
<p>I have tried Java and Python so far.  Java I am having build issues with (probably don't have a good java environment set up).  The Python parser runs, but currently doesn't recognise anything, so there are clearly some problems with my antlr grammar.  It looks OK (at least, to my untrained eye), but currently matches nothing. Back to the drawing board then.  I intend to play with some cut down versions to get matching working, then apply what I've learned to the current lmnl antlr grammar.
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php?title=LMNL_Parser_Experiment&amp;action=edit&amp;section=15" title="LMNL Parser Experiment">edit</a>]</div><a name="Update"></a><h4>Update</h4>
<p>I tried an incredibly cut down grammar, with only the fragment literals, and the definition of the prolog.  It still didn't match anything.  The grammar problem seems to be in my understanding of fragments.  Without fragments, lots of tokens suddenly become unreachable.  This is actually a clue to why it's not working - when the tokens are directly surfaced, some of them can never match because another token would match first.  The next step is to make the basic tokens match properly, and ignore most of the higher level productions for the time being.  That should let me understand what fragments are really for too.
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php?title=LMNL_Parser_Experiment&amp;action=edit&amp;section=16" title="LMNL Parser Experiment">edit</a>]</div><a name="Update_2"></a><h4>Update 2</h4>
<p>I figured out the matching problem; it was due to my lack of understanding of the separation of lexer and parser.  The lexer runs first, without knowledge of the higher level productions.  It must be able to unambiguously split up the input stream into lexer tokens, without knowing how they will be consumed.  This presents a few problems for the lmnl grammar, as it has several lexer tokens  that are subsets of another (e.g. encodingDecl and versionInfo).  This means the lexer cannot disambiguate them, without additional help.  One way to do this is via syntactic predicates - a boolean flag that is set or unset depending on the context.  
</p><p>However, we cannot use context supplied by the higher level productions - it must all happen at the lexer token level.  This is not particularly easy, but probably not impossible.  It does make for hard to read grammars though.  A similar problem will be encountered with content inside annotation tags, as a global boolean flag will not cope properly with nested tags (but I haven't got that far yet).
</p><p>The bottom line is that lexer/parser combinations are not particularly well suited to parsing tag languages with lexer tokens that should apply or not apply contextually.  SimpleParse does not have this limitation, as it has no separate lexing stage.  An alternative would be to explore PEG parsers (Parsing Expression Grammar), which do not have a separate lexing stage.  For the time being, I will continue with Antlr and AntlrWorks and see how far I get.
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php?title=LMNL_Parser_Experiment&amp;action=edit&amp;section=17" title="LMNL Parser Experiment">edit</a>]</div><a name="Experiment_3:_ANTLR_with_a_dumb_lexer"></a><h2>Experiment 3: ANTLR with a dumb lexer</h2>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php?title=LMNL_Parser_Experiment&amp;action=edit&amp;section=18" title="LMNL Parser Experiment">edit</a>]</div><a name="Requirements_3"></a><h3>Requirements</h3>
<p>The same as for experiment 2.
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php?title=LMNL_Parser_Experiment&amp;action=edit&amp;section=19" title="LMNL Parser Experiment">edit</a>]</div><a name="Building_the_grammar_3"></a><h3>Building the grammar</h3>
<p>Having tried to make an intelligent lexer (and succeeding, except for recursive structures like annotations), I decided to make a dumb lexer, that just splits up the input text into vaguely useful structures, and to place all the intelligence in the parser layer.  The current grammar processes all LMNL constructs correctly, although I have not yet added predicates to test that the characters are all valid in each section.  
</p><p>There are some other weaknesses, notably that ending an annotation currently just tests that there are no other open tags in the content inside the annotation.  It has proved difficult to match the start and end annotation tags using their tagnames, as I had to decide whether an end tag was an end tag or an end annotation tag before the parser gets to see the name of the tag.  It may be possible to improve on this.  The only real downside of this is that, if the content in an annotation is poorly formed, it prevents the parser from recovering gracefully, and probably stops the rest of the document from parsing correctly.  So it works, but it is not very robust.
</p><p>Finally, the parser does nothing except parse a LMNL document.  It does not construct useful objects from parsing the LMNL, so at present it does nothing except prove it is possible to parse LMNL with ANLTR.
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php?title=LMNL_Parser_Experiment&amp;action=edit&amp;section=20" title="LMNL Parser Experiment">edit</a>]</div><a name="Running_the_Parser_3"></a><h3>Running the Parser</h3>
<p>(I can't currently upload grammar files to the wiki; hopefully this will soon be resolved.)
</p><p>The parser currently has no test harness, but this is not necessary if using the ANTLRWorks IDE, as the target language is java, which ANTLRWorks natively understands.  So you can "debug" a grammar (i.e. feed it an input text or file) directly in the IDE.  This also lets you see the resulting parse tree as a nice graphical diagram, which is very useful.
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php?title=LMNL_Parser_Experiment&amp;action=edit&amp;section=21" title="LMNL Parser Experiment">edit</a>]</div><a name="Results_3"></a><h3>Results</h3>
<p>The current version I have produced is still a beta development version; it's a bit messy and needs tidying up a bit, but it does work.  As such, it isn't fully conformant with the LMNL on the detailed syntax page, only because I have experimented with various things as I went along.  I will produce a conformant version, and an experimental version.  I will also produce a python version (the current version is java only).
</p><p><br>
</p><p>___________________________
</p><p>Matt Palmer, September 2008.  I can be contacted at ieee.org using my name and a dot in the usual way.
</p><div class="printfooter">
Retrieved from "<a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org/wiki/index.php/LMNL_Parser_Experiment">http://www.lmnl.org/wiki/index.php/LMNL_Parser_Experiment</a>"</div>
	    	    <!-- end content -->
	    <div class="visualClear"></div>
	  </div>
	</div>
      </div>
      <div id="column-one">
	<div id="p-cactions" class="portlet">
	  <h5>Views</h5>
	  <ul>
	    <li id="ca-nstab-main" class="selected"><a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php/LMNL_Parser_Experiment">Article</a></li><li id="ca-talk" class="new"><a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php?title=Talk:LMNL_Parser_Experiment&amp;action=edit">Discussion</a></li><li id="ca-edit"><a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php?title=LMNL_Parser_Experiment&amp;action=edit">Edit</a></li><li id="ca-history"><a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php?title=LMNL_Parser_Experiment&amp;action=history">History</a></li>	  </ul>
	</div>
	<div class="portlet" id="p-personal">
	  <h5>Personal tools</h5>
	  <div class="pBody">
	    <ul>
	    <li id="pt-login"><a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php?title=Special:Userlogin&amp;returnto=LMNL_Parser_Experiment">Create an account or log in</a></li>	    </ul>
	  </div>
	</div>
	<div class="portlet" id="p-logo">
	  <a style="background-image: url(/web/20081205022219im_/http://www.lmnl.org:80/wiki/skins/common/images/lmnlwiki.png);" href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php/Main_Page" title="Main Page"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
		<div class="portlet" id="p-navigation">
	  <h5>Navigation</h5>
	  <div class="pBody">
	    <ul>
	    	      <li id="n-mainpage"><a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php/Main_Page">Main Page</a></li>
	     	      <li id="n-portal"><a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php/LMNLWiki:Community_Portal">Community portal</a></li>
	     	      <li id="n-currentevents"><a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php/Current_events">Current events</a></li>
	     	      <li id="n-recentchanges"><a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php/Special:Recentchanges">Recent changes</a></li>
	     	      <li id="n-randompage"><a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php/Special:Random">Random page</a></li>
	     	      <li id="n-help"><a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php/Help:Contents">Help</a></li>
	     	      <li id="n-sitesupport"><a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php/LMNLWiki:Site_support">Donations</a></li>
	     	    </ul>
	  </div>
	</div>
		<div id="p-search" class="portlet">
	  <h5><label for="searchInput">Search</label></h5>
	  <div class="pBody">
	    <form name="searchform" action="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php/Special:Search" id="searchform">
	      <input id="searchInput" name="search" type="text" accesskey="f" value="">
	      <input type="submit" name="go" class="searchButton" id="searchGoButton" value="Go">&nbsp;<input type="submit" name="fulltext" class="searchButton" value="Search">
	    </form>
	  </div>
	</div>
	<div class="portlet" id="p-tb">
	  <h5>Toolbox</h5>
	  <div class="pBody">
	    <ul>
		  		  <li id="t-whatlinkshere"><a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php/Special:Whatlinkshere/LMNL_Parser_Experiment">What links here</a></li>
		  		  <li id="t-recentchangeslinked"><a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php/Special:Recentchangeslinked/LMNL_Parser_Experiment">Related changes</a></li>
		                	      	      	      	      	      	      	      <li id="t-upload"><a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php/Special:Upload">Upload file</a></li>	      	      <li id="t-specialpages"><a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php/Special:Specialpages">Special pages</a></li>	      	      	      <li id="t-print"><a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php?title=LMNL_Parser_Experiment&amp;printable=yes">Printable version</a></li>
	      	    </ul>
	  </div>
	</div>
	      </div><!-- end of the left (by default at least) column -->
      <div class="visualClear"></div>
      <div id="footer">
    <div id="f-poweredbyico"><a href="http://web.archive.org/web/20081205022219/http://www.mediawiki.org/"><img src="./LMNL Parser Experiment - LMNLWiki_files/poweredby_mediawiki_88x31.png" alt="MediaWiki"></a></div>		<ul id="f-list">
	  <li id="f-lastmod"> This page was last modified 17:28, 5 September 2008.</li>	  <li id="f-viewcount">This page has been accessed 3,491 times.</li>	  	  	  	  <li id="f-about"><a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php/LMNLWiki:About" title="LMNLWiki:About">About LMNLWiki</a></li>	  <li id="f-disclaimer"><a href="http://web.archive.org/web/20081205022219/http://www.lmnl.org:80/wiki/index.php/LMNLWiki:General_disclaimer" title="LMNLWiki:General disclaimer">Disclaimers</a></li>	  	</ul>
      </div>
    </div>
    <!-- Served by odin in 0.35 secs. -->  

</body></html>